function injectWalletInfoToPage(e){if(!e)return;const t=new CustomEvent("solanaWalletInjection",{detail:{walletAddress:e,source:"my-nextjs-extension"}});document.dispatchEvent(t);const n=document.createElement("script");n.textContent=`\n    // Listen for requests from the page to connect to our extension wallet\n    window.addEventListener('connectSolanaWallet', function(event) {\n      document.dispatchEvent(new CustomEvent('solanaWalletConnected', {\n        detail: {\n          walletAddress: '${e}',\n          source: 'my-nextjs-extension'\n        }\n      }));\n    });\n  `,(document.head||document.documentElement).appendChild(n),n.remove()}chrome.runtime.onMessage.addListener(function(e,t,n){if("performAction"===e.action){const t=document.title,o=(window.location.href,e.walletAddress||"Not connected"),s=document.createElement("div");s.style.position="fixed",s.style.top="20px",s.style.right="20px",s.style.padding="15px",s.style.backgroundColor="#9945FF",s.style.color="white",s.style.borderRadius="4px",s.style.zIndex="9999",s.style.boxShadow="0 2px 10px rgba(0,0,0,0.2)",s.style.transition="opacity 0.5s",s.style.display="flex",s.style.flexDirection="column",s.style.gap="5px";const l=document.createElement("div");l.textContent=`Extension activated on: ${t}`,l.style.fontWeight="bold";const c=document.createElement("div");if(c.style.fontSize="12px",o&&"Not connected"!==o){const e=o.slice(0,6)+"..."+o.slice(-4);c.textContent=`Connected wallet: ${e}`}else c.textContent="No wallet connected";s.appendChild(l),s.appendChild(c),document.body.appendChild(s),setTimeout(function(){s.style.opacity="0",setTimeout(function(){document.body.removeChild(s)},500)},3e3),injectWalletInfoToPage(o),n({status:"success",message:"Action performed successfully"})}return!0});